!function(a,b){function e(){c||(c={verbose:!1,queryLimit:{attempt:5,delay:250,random:250},classes:{Map:google.maps.Map,Marker:google.maps.Marker,InfoWindow:google.maps.InfoWindow,Circle:google.maps.Circle,Rectangle:google.maps.Rectangle,OverlayView:google.maps.OverlayView,StreetViewPanorama:google.maps.StreetViewPanorama,KmlLayer:google.maps.KmlLayer,TrafficLayer:google.maps.TrafficLayer,BicyclingLayer:google.maps.BicyclingLayer,GroundOverlay:google.maps.GroundOverlay,StyledMapType:google.maps.StyledMapType,ImageMapType:google.maps.ImageMapType},map:{mapTypeId:google.maps.MapTypeId.ROADMAP,center:[46.578498,2.457275],zoom:2},overlay:{pane:"floatPane",content:"",offset:{x:0,y:0}},geoloc:{getCurrentPosition:{maximumAge:6e4,timeout:5e3}}})}function f(a,c){return a!==b?a:"gmap3_"+(c?d+1:++d)}function g(a){var d,b=function(a){return parseInt(a,10)},c=google.maps.version.split(".").map(b);for(a=a.split(".").map(b),d=0;d<a.length;d++){if(!c.hasOwnProperty(d))return!1;if(c[d]<a[d])return!1}return!0}function h(b,c,d,e,f){if(c.todo.events||c.todo.onces){var g={id:e,data:c.todo.data,tag:c.todo.tag};c.todo.events&&a.each(c.todo.events,function(c,e){var h=b,i=e;a.isArray(e)&&(h=e[0],i=e[1]),google.maps.event.addListener(d,c,function(a){i.apply(h,[f?f:d,a,g])})}),c.todo.onces&&a.each(c.todo.onces,function(c,e){var h=b,i=e;a.isArray(e)&&(h=e[0],i=e[1]),google.maps.event.addListenerOnce(d,c,function(a){i.apply(h,[f?f:d,a,g])})})}}function i(){var a=[];this.empty=function(){return!a.length},this.add=function(b){a.push(b)},this.get=function(){return a.length?a[0]:!1},this.ack=function(){a.shift()}}function j(b,d,e){function j(a){var b={};return b[a]={},b}function k(){var a;for(a in e)if(!(a in f))return a}var h,f={},g=this,i={latLng:{map:!1,marker:!1,infowindow:!1,circle:!1,overlay:!1,getlatlng:!1,getmaxzoom:!1,getelevation:!1,streetviewpanorama:!1,getaddress:!0},geoloc:{getgeoloc:!0}};"string"==typeof e&&(e=j(e)),this.run=function(){for(var g,j;g=k();){if("function"==typeof b[g])return h=g,j=a.extend(!0,{},c[g]||{},e[g].options||{}),g in i.latLng?e[g].values?H(e[g].values,b,b[g],{todo:e[g],opts:j,session:f}):G(b,b[g],i.latLng[g],{todo:e[g],opts:j,session:f}):g in i.geoloc?I(b,b[g],{todo:e[g],opts:j,session:f}):b[g].apply(b,[{todo:e[g],opts:j,session:f}]),void 0;f[g]=null}d.apply(b,[e,f])},this.ack=function(a){f[h]=a,g.run.apply(g,[])}}function k(a){var b,c=[];for(b in a)c.push(b);return c}function l(b,c){var d={};if(b.todo)for(var e in b.todo)"options"!==e&&"values"!==e&&(d[e]=b.todo[e]);var f,g=["data","tag","id","events","onces"];for(f=0;f<g.length;f++)m(d,g[f],c,b.todo);return d.options=a.extend({},b.opts||{},c.options||{}),d}function m(a,b){for(var c=2;c<arguments.length;c++)if(b in arguments[c])return a[b]=arguments[c][b],void 0}function n(){var a=[];this.get=function(b){if(a.length){var c,d,e,f,g,h=k(b);for(c=0;c<a.length;c++){for(f=a[c],g=h.length==f.keys.length,d=0;d<h.length&&g;d++)e=h[d],g=e in f.request,g&&(g="object"==typeof b[e]&&"equals"in b[e]&&"function"==typeof b[e]?b[e].equals(f.request[e]):b[e]===f.request[e]);if(g)return f.results}}},this.store=function(b,c){a.push({request:b,keys:k(b),results:c})}}function o(b,d,e,f){var g=this,h=[];c.classes.OverlayView.call(this),this.setMap(b),this.onAdd=function(){var b=this.getPanes();d.pane in b&&a(b[d.pane]).append(f),a.each("dblclick click mouseover mousemove mouseout mouseup mousedown".split(" "),function(b,c){h.push(google.maps.event.addDomListener(f[0],c,function(b){a.Event(b).stopPropagation(),google.maps.event.trigger(g,c,[b]),g.draw()}))}),h.push(google.maps.event.addDomListener(f[0],"contextmenu",function(b){a.Event(b).stopPropagation(),google.maps.event.trigger(g,"rightclick",[b]),g.draw()}))},this.getPosition=function(){return e},this.draw=function(){var a=this.getProjection().fromLatLngToDivPixel(e);f.css("left",a.x+d.offset.x+"px").css("top",a.y+d.offset.y+"px")},this.onRemove=function(){for(var a=0;a<h.length;a++)google.maps.event.removeListener(h[a]);f.remove()},this.hide=function(){f.hide()},this.show=function(){f.show()},this.toggle=function(){f&&(f.is(":visible")?this.show():this.hide())},this.toggleDOM=function(){this.getMap()?this.setMap(null):this.setMap(b)},this.getDOMElement=function(){return f[0]}}function p(a){function d(){return this.onAdd=function(){},this.onRemove=function(){},this.draw=function(){},c.classes.OverlayView.apply(this,[])}d.prototype=c.classes.OverlayView.prototype;var e=new d;return e.setMap(a),e}function q(b,d,e){function B(a){s[a]||(delete t[a].options.map,s[a]=new c.classes.Marker(t[a].options),h(b,{todo:t[a]},s[a],t[a].id))}function C(){return(x=v.getProjection())?(k=!0,n.push(google.maps.event.addListener(d,"zoom_changed",function(){I()})),n.push(google.maps.event.addListener(d,"bounds_changed",function(){I()})),K(),void 0):(setTimeout(function(){C.apply(m,[])},25),void 0)}function E(a){"object"==typeof o[a]?("function"==typeof o[a].obj.setMap&&o[a].obj.setMap(null),"function"==typeof o[a].obj.remove&&o[a].obj.remove(),"function"==typeof o[a].shadow.remove&&o[a].obj.remove(),"function"==typeof o[a].shadow.setMap&&o[a].shadow.setMap(null),delete o[a].obj,delete o[a].shadow):s[a]&&s[a].setMap(null),delete o[a]}function F(){var a,b,c,d,e,f,g,h;return arguments[0]instanceof google.maps.LatLng?(a=arguments[0].lat(),c=arguments[0].lng(),arguments[1]instanceof google.maps.LatLng?(b=arguments[1].lat(),d=arguments[1].lng()):(b=arguments[1],d=arguments[2])):(a=arguments[0],c=arguments[1],arguments[2]instanceof google.maps.LatLng?(b=arguments[2].lat(),d=arguments[2].lng()):(b=arguments[2],d=arguments[3])),e=Math.PI*a/180,f=Math.PI*c/180,g=Math.PI*b/180,h=Math.PI*d/180,6371e3*Math.acos(Math.min(Math.cos(e)*Math.cos(g)*Math.cos(f)*Math.cos(h)+Math.cos(e)*Math.sin(f)*Math.cos(g)*Math.sin(h)+Math.sin(e)*Math.sin(g),1))}function G(){var a=F(d.getCenter(),d.getBounds().getNorthEast()),b=new google.maps.Circle({center:d.getCenter(),radius:1.25*a});return b.getBounds()}function H(){var b,a={};for(b in o)a[b]=!0;return a}function I(){clearTimeout(w),w=setTimeout(function(){K()},25)}function J(a){var b=x.fromLatLngToDivPixel(a),c=x.fromDivPixelToLatLng(new google.maps.Point(b.x+e.radius,b.y-e.radius)),d=x.fromDivPixelToLatLng(new google.maps.Point(b.x-e.radius,b.y+e.radius));return new google.maps.LatLngBounds(d,c)}function K(){if(!g&&!j&&k){var n,p,q,r,v,w,x,A,B,C,D,b=[],c={},f=d.getZoom(),h="maxZoom"in e&&f>e.maxZoom,m=H(),s=!1;for(i=!1,f>3&&(v=G(),s=v.getSouthWest().lng()<v.getNorthEast().lng()),n=0;n<t.length;n++)!t[n]||s&&!v.contains(t[n].options.position)||y&&!y(u[n])||b.push(n);for(;;){for(n=0;c[n]&&n<b.length;)n++;if(n==b.length)break;if(r=[],l&&!h){D=10;do for(A=r,r=[],D--,x=A.length?v.getCenter():t[b[n]].options.position,v=J(x),p=n;p<b.length;p++)c[p]||v.contains(t[b[p]].options.position)&&r.push(p);while(A.length<r.length&&r.length>1&&D)}else for(p=n;p<b.length;p++)if(!c[p]){r.push(p);break}for(w={indexes:[],ref:[]},B=C=0,q=0;q<r.length;q++)c[r[q]]=!0,w.indexes.push(b[r[q]]),w.ref.push(b[r[q]]),B+=t[b[r[q]]].options.position.lat(),C+=t[b[r[q]]].options.position.lng();B/=r.length,C/=r.length,w.latLng=new google.maps.LatLng(B,C),w.ref=w.ref.join("-"),w.ref in m?delete m[w.ref]:(1===r.length&&(o[w.ref]=!0),z(w))}a.each(m,function(a){E(a)}),j=!1}}var w,x,y,z,A,g=!1,i=!1,j=!1,k=!1,l=!0,m=this,n=[],o={},q={},r={},s=[],t=[],u=[],v=p(d,e.radius);C(),this.getById=function(a){return a in q?(B(q[a]),s[q[a]]):!1},this.rm=function(a){var b=q[a];s[b]&&s[b].setMap(null),delete s[b],s[b]=!1,delete t[b],t[b]=!1,delete u[b],u[b]=!1,delete q[a],delete r[b],i=!0},this.clearById=function(a){return a in q?(this.rm(a),!0):void 0},this.clear=function(a,b,c){var d,e,f,g,h,i=[],j=D(c);for(a?(d=t.length-1,e=-1,f=-1):(d=0,e=t.length,f=1),g=d;g!=e&&(!t[g]||j&&!j(t[g].tag)||(i.push(r[g]),!b&&!a));g+=f);for(h=0;h<i.length;h++)this.rm(i[h])},this.add=function(a,b){a.id=f(a.id),this.clearById(a.id),q[a.id]=s.length,r[s.length]=a.id,s.push(null),t.push(a),u.push(b),i=!0},this.addMarker=function(a,c){c=c||{},c.id=f(c.id),this.clearById(c.id),c.options||(c.options={}),c.options.position=a.getPosition(),h(b,{todo:c},a,c.id),q[c.id]=s.length,r[s.length]=c.id,s.push(a),t.push(c),u.push(c.data||{}),i=!0},this.todo=function(a){return t[a]},this.value=function(a){return u[a]},this.marker=function(a){return a in s?(B(a),s[a]):!1},this.markerIsSet=function(a){return Boolean(s[a])},this.setMarker=function(a,b){s[a]=b},this.store=function(a,b,c){o[a.ref]={obj:b,shadow:c}},this.free=function(){for(var b=0;b<n.length;b++)google.maps.event.removeListener(n[b]);n=[],a.each(o,function(a){E(a)}),o={},a.each(t,function(a){t[a]=null}),t=[],a.each(s,function(a){s[a]&&(s[a].setMap(null),delete s[a])}),s=[],a.each(u,function(a){delete u[a]}),u=[],q={},r={}},this.filter=function(a){y=a,K()},this.enable=function(a){l!=a&&(l=a,K())},this.display=function(a){z=a},this.error=function(a){A=a},this.beginUpdate=function(){g=!0},this.endUpdate=function(){g=!1,i&&K()},this.autofit=function(a){for(var b=0;b<t.length;b++)t[b]&&a.extend(t[b].options.position)}}function r(a,b){this.id=function(){return a},this.filter=function(a){b.filter(a)},this.enable=function(){b.enable(!0)},this.disable=function(){b.enable(!1)},this.add=function(a,c,d){d||b.beginUpdate(),b.addMarker(a,c),d||b.endUpdate()},this.getById=function(a){return b.getById(a)},this.clearById=function(a,c){var d;return c||b.beginUpdate(),d=b.clearById(a),c||b.endUpdate(),d},this.clear=function(a,c,d,e){e||b.beginUpdate(),b.clear(a,c,d),e||b.endUpdate()}}function s(){function e(a){return{id:a.id,name:a.name,object:a.obj,tag:a.tag,data:a.data}}function g(a){"function"==typeof a.setMap&&a.setMap(null),"function"==typeof a.remove&&a.remove(),"function"==typeof a.free&&a.free(),a=null}var c={},d={};this.add=function(a,b,e,g){var h=a.todo||{},i=f(h.id);return c[b]||(c[b]=[]),i in d&&this.clearById(i),d[i]={obj:e,sub:g,name:b,id:i,tag:h.tag,data:h.data},c[b].push(i),i},this.getById=function(a,b,c){return a in d?b?d[a].sub:c?e(d[a]):d[a].obj:!1},this.get=function(a,b,f,g){var h,i,j=D(f);if(!c[a]||!c[a].length)return null;for(h=c[a].length;h;)if(h--,i=c[a][b?h:c[a].length-h-1],i&&d[i]){if(j&&!j(d[i].tag))continue;return g?e(d[i]):d[i].obj}return null},this.all=function(a,f,g){var h=[],i=D(f),j=function(a){var b,f;for(b=0;b<c[a].length;b++)if(f=c[a][b],f&&d[f]){if(i&&!i(d[f].tag))continue;h.push(g?e(d[f]):d[f].obj)}};if(a in c)j(a);else if(a===b)for(a in c)j(a);return h},this.rm=function(a,b,e){var f,g;if(!c[a])return!1;if(b)if(e)for(f=c[a].length-1;f>=0&&(g=c[a][f],!b(d[g].tag));f--);else for(f=0;f<c[a].length&&(g=c[a][f],!b(d[g].tag));f++);else f=e?c[a].length-1:0;return f in c[a]?this.clearById(c[a][f],f):!1},this.clearById=function(a,e){if(a in d){var f,h=d[a].name;for(f=0;e===b&&f<c[h].length;f++)a===c[h][f]&&(e=f);return g(d[a].obj),d[a].sub&&g(d[a].sub),delete d[a],c[h].splice(e,1),!0}return!1},this.objGetById=function(a){var b;if(c.clusterer)for(var e in c.clusterer)if((b=d[c.clusterer[e]].obj.getById(a))!==!1)return b;return!1},this.objClearById=function(a){if(c.clusterer)for(var b in c.clusterer)if(d[c.clusterer[b]].obj.clearById(a))return!0;return null},this.clear=function(a,b,d,e){var f,g,h,i=D(e);if(a&&a.length)a=C(a);else{a=[];for(f in c)a.push(f)}for(g=0;g<a.length;g++)if(h=a[g],b)this.rm(h,i,!0);else if(d)this.rm(h,i,!1);else for(;this.rm(h,i,!1););},this.objClear=function(b,e,f,g){if(c.clusterer&&(a.inArray("marker",b)>=0||!b.length))for(var h in c.clusterer)d[c.clusterer[h]].obj.clear(e,f,g)}}function v(){return t.geocoder||(t.geocoder=new google.maps.Geocoder),t.geocoder}function w(){return t.directionsService||(t.directionsService=new google.maps.DirectionsService),t.directionsService}function x(){return t.elevationService||(t.elevationService=new google.maps.ElevationService),t.elevationService}function y(){return t.maxZoomService||(t.maxZoomService=new google.maps.MaxZoomService),t.maxZoomService}function z(){return t.distanceMatrixService||(t.distanceMatrixService=new google.maps.DistanceMatrixService),t.distanceMatrixService}function A(){if(c.verbose){var a,b=[];if(window.console&&"function"==typeof console.error){for(a=0;a<arguments.length;a++)b.push(arguments[a]);console.error.apply(console,b)}else{for(b="",a=0;a<arguments.length;a++)b+=arguments[a].toString()+" ";alert(b)}}}function B(a){return("number"==typeof a||"string"==typeof a)&&""!==a&&!isNaN(a)}function C(a){var c,d=[];if(a!==b)if("object"==typeof a)if("number"==typeof a.length)d=a;else for(c in a)d.push(a[c]);else d.push(a);return d}function D(c){return c?"function"==typeof c?c:(c=C(c),function(d){if(d===b)return!1;if("object"==typeof d){for(var e=0;e<d.length;e++)if(a.inArray(d[e],c)>=0)return!0;return!1}return a.inArray(d,c)>=0}):void 0}function E(b,c,d){var e=c?b:null;return b&&"string"!=typeof b?b.latLng?E(b.latLng):b instanceof google.maps.LatLng?b:B(b.lat)?new google.maps.LatLng(b.lat,b.lng):!d&&a.isArray(b)?B(b[0])&&B(b[1])?new google.maps.LatLng(b[0],b[1]):e:e:e}function F(b){var c,d;return!b||b instanceof google.maps.LatLngBounds?b||null:(a.isArray(b)?2==b.length?(c=E(b[0]),d=E(b[1])):4==b.length&&(c=E([b[0],b[1]]),d=E([b[2],b[3]])):"ne"in b&&"sw"in b?(c=E(b.ne),d=E(b.sw)):"n"in b&&"e"in b&&"s"in b&&"w"in b&&(c=E([b.n,b.e]),d=E([b.s,b.w])),c&&d?new google.maps.LatLngBounds(d,c):null)}function G(a,b,d,e,f){var g=d?E(e.todo,!1,!0):!1,h=g?{latLng:g}:e.todo.address?"string"==typeof e.todo.address?{address:e.todo.address}:e.todo.address:!1,i=h?u.get(h):!1,j=this;h?(f=f||0,i?(e.latLng=i.results[0].geometry.location,e.results=i.results,e.status=i.status,b.apply(a,[e])):(h.location&&(h.location=E(h.location)),h.bounds&&(h.bounds=F(h.bounds)),v().geocode(h,function(g,i){i===google.maps.GeocoderStatus.OK?(u.store(h,{results:g,status:i}),e.latLng=g[0].geometry.location,e.results=g,e.status=i,b.apply(a,[e])):i===google.maps.GeocoderStatus.OVER_QUERY_LIMIT&&f<c.queryLimit.attempt?setTimeout(function(){G.apply(j,[a,b,d,e,f+1])},c.queryLimit.delay+Math.floor(Math.random()*c.queryLimit.random)):(A("geocode failed",i,h),e.latLng=e.results=!1,e.status=i,b.apply(a,[e]))}))):(e.latLng=E(e.todo,!1,!0),b.apply(a,[e]))}function H(b,c,d,e){function h(){do g++;while(g<b.length&&!("address"in b[g]));return g>=b.length?(d.apply(c,[e]),void 0):(G(f,function(c){delete c.todo,a.extend(b[g],c),h.apply(f,[])},!0,{todo:b[g]}),void 0)}var f=this,g=-1;h()}function I(a,b,c){var d=!1;navigator&&navigator.geolocation?navigator.geolocation.getCurrentPosition(function(e){d||(d=!0,c.latLng=new google.maps.LatLng(e.coords.latitude,e.coords.longitude),b.apply(a,[c]))},function(){d||(d=!0,c.latLng=!1,b.apply(a,[c]))},c.opts.getCurrentPosition):(c.latLng=!1,b.apply(a,[c]))}function J(d){function t(){!p&&(p=k.get())&&p.run()}function u(){p=null,k.ack(),t.call(e)}function v(b){if(b.todo.callback){var c=Array.prototype.slice.call(arguments,1);"function"==typeof b.todo.callback?b.todo.callback.apply(d,c):a.isArray(b.todo.callback)&&"function"==typeof b.todo.callback[1]&&b.todo.callback[1].apply(b.todo.callback[0],c)}}function B(a,b,c){c&&h(d,a,b,c),v(a,b),p.ack(b)}function D(b,e){if(e=e||{},n)e.todo&&e.todo.options&&(e.todo.options.center&&(e.todo.options.center=E(e.todo.options.center)),n.setOptions(e.todo.options));else{var f=e.opts||a.extend(!0,{},c.map,e.todo&&e.todo.options?e.todo.options:{});f.center=b||E(f.center),n=new c.classes.Map(d.get(0),f)}}function G(b,c,e){var f=[],g="values"in b.todo;return g||(b.todo.values=[{options:b.opts}]),b.todo.values.length?(D(),a.each(b.todo.values,function(g,i){var j,k,o,p,q=l(b,i);if(q.options[e])if(q.options[e][0][0]&&a.isArray(q.options[e][0][0]))for(k=0;k<q.options[e].length;k++)for(o=0;o<q.options[e][k].length;o++)q.options[e][k][o]=E(q.options[e][k][o]);else for(k=0;k<q.options[e].length;k++)q.options[e][k]=E(q.options[e][k]);q.options.map=n,p=new google.maps[c](q.options),f.push(p),j=m.add({todo:q},c.toLowerCase(),p),h(d,{todo:q},p,j)}),B(b,g?f:f[0]),void 0):(B(b,!1),void 0)}function H(c){var l,m,f=new q(d,n,c),g={},i={},j=[],k=/^[0-9]+$/;for(m in c)k.test(m)?(j.push(1*m),i[m]=c[m],i[m].width=i[m].width||0,i[m].height=i[m].height||0):g[m]=c[m];return j.sort(function(a,b){return a>b}),l=g.calculator?function(b){var c=[];return a.each(b,function(a,b){c.push(f.value(b))}),g.calculator.apply(d,[c])}:function(a){return a.length},f.error(function(){A.apply(e,arguments)}),f.display(function(k){var m,o,p,q,r,s=l(k.indexes);if(c.force||s>1)for(m=0;m<j.length;m++)j[m]<=s&&(o=i[j[m]]);o?(r=o.offset||[-o.width/2,-o.height/2],p=a.extend({},g),p.options=a.extend({pane:"overlayLayer",content:o.content?o.content.replace("CLUSTER_COUNT",s):"",offset:{x:("x"in r?r.x:r[0])||0,y:("y"in r?r.y:r[1])||0}},g.options||{}),q=e.overlay({todo:p,opts:p.options,latLng:E(k)},!0),p.options.pane="floatShadow",p.options.content=a(document.createElement("div")).width(o.width+"px").height(o.height+"px").css({cursor:"pointer"}),shadow=e.overlay({todo:p,opts:p.options,latLng:E(k)},!0),g.data={latLng:E(k),markers:[]},a.each(k.indexes,function(a,b){g.data.markers.push(f.value(b)),f.markerIsSet(b)&&f.marker(b).setMap(null)}),h(d,{todo:g},shadow,b,{main:q,shadow:shadow}),f.store(k,q,shadow)):a.each(k.indexes,function(a,b){f.marker(b).setMap(n)})}),f}var p,e=this,k=new i,m=new s,n=null;this._plan=function(a){for(var b=0;b<a.length;b++)k.add(new j(e,u,a[b]));t()},this.map=function(a){D(a.latLng,a),h(d,a,n),B(a,n)},this.destroy=function(a){m.clear(),d.empty(),n&&(n=null),B(a,!0)},this.infowindow=function(e){var f=[],g="values"in e.todo;g||(e.latLng&&(e.opts.position=e.latLng),e.todo.values=[{options:e.opts}]),a.each(e.todo.values,function(a,i){var j,k,o=l(e,i);o.options.position=o.options.position?E(o.options.position):E(i.latLng),n||D(o.options.position),k=new c.classes.InfoWindow(o.options),k&&(o.open===b||o.open)&&(g?k.open(n,o.anchor?o.anchor:b):k.open(n,o.anchor?o.anchor:e.latLng?b:e.session.marker?e.session.marker:b)),f.push(k),j=m.add({todo:o},"infowindow",k),h(d,{todo:o},k,j)}),B(e,g?f:f[0])},this.circle=function(b){var e=[],f="values"in b.todo;return f||(b.opts.center=b.latLng||E(b.opts.center),b.todo.values=[{options:b.opts}]),b.todo.values.length?(a.each(b.todo.values,function(a,f){var g,i,j=l(b,f);j.options.center=j.options.center?E(j.options.center):E(f),n||D(j.options.center),j.options.map=n,i=new c.classes.Circle(j.options),e.push(i),g=m.add({todo:j},"circle",i),h(d,{todo:j},i,g)}),B(b,f?e:e[0]),void 0):(B(b,!1),void 0)},this.overlay=function(b,e){var f=[],g="values"in b.todo;return g||(b.todo.values=[{latLng:b.latLng,options:b.opts}]),b.todo.values.length?(o.__initialised||(o.prototype=new c.classes.OverlayView,o.__initialised=!0),a.each(b.todo.values,function(c,g){var i,j,k=l(b,g),p=a(document.createElement("div")).css({border:"none",borderWidth:"0px",position:"absolute"});p.append(k.options.content),j=new o(n,k.options,E(k)||E(g),p),f.push(j),p=null,e||(i=m.add(b,"overlay",j),h(d,{todo:k},j,i))}),e?f[0]:(B(b,g?f:f[0]),void 0)):(B(b,!1),void 0)},this.getaddress=function(a){v(a,a.results,a.status),p.ack()},this.getlatlng=function(a){v(a,a.results,a.status),p.ack()},this.getmaxzoom=function(a){y().getMaxZoomAtLatLng(a.latLng,function(b){v(a,b.status===google.maps.MaxZoomStatus.OK?b.zoom:!1,status),p.ack()})},this.getelevation=function(a){var b,c=[],d=function(b,c){v(a,c===google.maps.ElevationStatus.OK?b:!1,c),p.ack()};if(a.latLng)c.push(a.latLng);else for(c=C(a.todo.locations||[]),b=0;b<c.length;b++)c[b]=E(c[b]);if(c.length)x().getElevationForLocations({locations:c},d);else{if(a.todo.path&&a.todo.path.length)for(b=0;b<a.todo.path.length;b++)c.push(E(a.todo.path[b]));c.length?x().getElevationAlongPath({path:c,samples:a.todo.samples},d):p.ack()}},this.defaults=function(b){a.each(b.todo,function(b,d){c[b]="object"==typeof c[b]?a.extend({},c[b],d):d}),p.ack(!0)},this.rectangle=function(b){var e=[],f="values"in b.todo;return f||(b.todo.values=[{options:b.opts}]),b.todo.values.length?(a.each(b.todo.values,function(a,f){var g,i,j=l(b,f);j.options.bounds=j.options.bounds?F(j.options.bounds):F(f),n||D(j.options.bounds.getCenter()),j.options.map=n,i=new c.classes.Rectangle(j.options),e.push(i),g=m.add({todo:j},"rectangle",i),h(d,{todo:j},i,g)}),B(b,f?e:e[0]),void 0):(B(b,!1),void 0)},this.polyline=function(a){G(a,"Polyline","path")},this.polygon=function(a){G(a,"Polygon","paths")},this.trafficlayer=function(a){D();var b=m.get("trafficlayer");b||(b=new c.classes.TrafficLayer,b.setMap(n),m.add(a,"trafficlayer",b)),B(a,b)},this.bicyclinglayer=function(a){D();var b=m.get("bicyclinglayer");b||(b=new c.classes.BicyclingLayer,b.setMap(n),m.add(a,"bicyclinglayer",b)),B(a,b)},this.groundoverlay=function(a){a.opts.bounds=F(a.opts.bounds),a.opts.bounds&&D(a.opts.bounds.getCenter());var b,d=new c.classes.GroundOverlay(a.opts.url,a.opts.bounds,a.opts.opts);d.setMap(n),b=m.add(a,"groundoverlay",d),B(a,d,b)},this.streetviewpanorama=function(b){b.opts.opts||(b.opts.opts={}),b.latLng?b.opts.opts.position=b.latLng:b.opts.opts.position&&(b.opts.opts.position=E(b.opts.opts.position)),b.todo.divId?b.opts.container=document.getElementById(b.todo.divId):b.opts.container&&(b.opts.container=a(b.opts.container).get(0));var d,e=new c.classes.StreetViewPanorama(b.opts.container,b.opts.opts);e&&n.setStreetView(e),d=m.add(b,"streetviewpanorama",e),B(b,e,d)},this.kmllayer=function(b){var e=[],f="values"in b.todo;return f||(b.todo.values=[{options:b.opts}]),b.todo.values.length?(a.each(b.todo.values,function(a,f){var i,j,k,o=l(b,f);n||D(),k=o.options,o.options.opts&&(k=o.options.opts,o.options.url&&(k.url=o.options.url)),k.map=n,j=g("3.10")?new c.classes.KmlLayer(k):new c.classes.KmlLayer(k.url,k),e.push(j),i=m.add({todo:o},"kmllayer",j),h(d,{todo:o},j,i)}),B(b,f?e:e[0]),void 0):(B(b,!1),void 0)},this.panel=function(c){D();var e,h,f=0,g=0,i=a(document.createElement("div"));i.css({position:"absolute",zIndex:1e3,visibility:"hidden"}),c.opts.content&&(h=a(c.opts.content),i.append(h),d.first().prepend(i),c.opts.left!==b?f=c.opts.left:c.opts.right!==b?f=d.width()-h.width()-c.opts.right:c.opts.center&&(f=(d.width()-h.width())/2),c.opts.top!==b?g=c.opts.top:c.opts.bottom!==b?g=d.height()-h.height()-c.opts.bottom:c.opts.middle&&(g=(d.height()-h.height())/2),i.css({top:g,left:f,visibility:"visible"})),e=m.add(c,"panel",i),B(c,i,e),i=null},this.marker=function(b){var g="values"in b.todo,i=!n;if(g||(b.opts.position=b.latLng||E(b.opts.position),b.todo.values=[{options:b.opts}]),!b.todo.values.length)return B(b,!1),void 0;if(i&&D(),b.todo.cluster&&!n.getBounds())return google.maps.event.addListenerOnce(n,"bounds_changed",function(){e.marker.apply(e,[b])}),void 0;if(b.todo.cluster){var j,k;b.todo.cluster instanceof r?(j=b.todo.cluster,k=m.getById(j.id(),!0)):(k=H(b.todo.cluster),j=new r(f(b.todo.id,!0),k),m.add(b,"clusterer",j,k)),k.beginUpdate(),a.each(b.todo.values,function(a,c){var d=l(b,c);d.options.position=d.options.position?E(d.options.position):E(c),d.options.map=n,i&&(n.setCenter(d.options.position),i=!1),k.add(d,c)}),k.endUpdate(),B(b,j)}else{var o=[];a.each(b.todo.values,function(a,e){var f,g,j=l(b,e);j.options.position=j.options.position?E(j.options.position):E(e),j.options.map=n,i&&(n.setCenter(j.options.position),i=!1),g=new c.classes.Marker(j.options),o.push(g),f=m.add({todo:j},"marker",g),h(d,{todo:j},g,f)}),B(b,g?o:o[0])}},this.getroute=function(a){a.opts.origin=E(a.opts.origin,!0),a.opts.destination=E(a.opts.destination,!0),w().route(a.opts,function(b,c){v(a,c==google.maps.DirectionsStatus.OK?b:!1,c),p.ack()})},this.directionsrenderer=function(b){b.opts.map=n;var c,d=new google.maps.DirectionsRenderer(b.opts);b.todo.divId?d.setPanel(document.getElementById(b.todo.divId)):b.todo.container&&d.setPanel(a(b.todo.container).get(0)),c=m.add(b,"directionsrenderer",d),B(b,d,c)},this.getgeoloc=function(a){B(a,a.latLng)},this.styledmaptype=function(a){D();var b=new c.classes.StyledMapType(a.todo.styles,a.opts);n.mapTypes.set(a.todo.id,b),B(a,b)},this.imagemaptype=function(a){D();var b=new c.classes.ImageMapType(a.opts);n.mapTypes.set(a.todo.id,b),B(a,b)},this.autofit=function(b){var c=new google.maps.LatLngBounds;a.each(m.all(),function(a,b){b.getPosition?c.extend(b.getPosition()):b.getBounds?(c.extend(b.getBounds().getNorthEast()),c.extend(b.getBounds().getSouthWest())):b.getPaths?b.getPaths().forEach(function(a){a.forEach(function(a){c.extend(a)})}):b.getPath?b.getPath().forEach(function(a){c.extend(a)}):b.getCenter?c.extend(b.getCenter()):b instanceof r&&(b=m.getById(b.id(),!0),b&&b.autofit(c))}),c.isEmpty()||n.getBounds()&&n.getBounds().equals(c)||("maxZoom"in b.todo&&google.maps.event.addListenerOnce(n,"bounds_changed",function(){this.getZoom()>b.todo.maxZoom&&this.setZoom(b.todo.maxZoom)}),n.fitBounds(c)),B(b,!0)},this.clear=function(b){if("string"==typeof b.todo){if(m.clearById(b.todo)||m.objClearById(b.todo))return B(b,!0),void 0;b.todo={name:b.todo}}b.todo.id?a.each(C(b.todo.id),function(a,b){m.clearById(b)||m.objClearById(b)}):(m.clear(C(b.todo.name),b.todo.last,b.todo.first,b.todo.tag),m.objClear(C(b.todo.name),b.todo.last,b.todo.first,b.todo.tag)),B(b,!0)},this.exec=function(b){var c=this;a.each(C(b.todo.func),function(e,f){a.each(c.get(b.todo,!0,b.todo.hasOwnProperty("full")?b.todo.full:!0),function(a,b){f.call(d,b)})}),B(b,!0)},this.get=function(c,d,e){var f,g,h=d?c:c.todo;return d||(e=h.full),"string"==typeof h?(g=m.getById(h,!1,e)||m.objGetById(h),g===!1&&(f=h,h={})):f=h.name,"map"===f&&(g=n),g||(g=[],h.id?(a.each(C(h.id),function(a,b){g.push(m.getById(b,!1,e)||m.objGetById(b))}),a.isArray(h.id)||(g=g[0])):(a.each(f?C(f):[b],function(b,c){var d;h.first?(d=m.get(c,!1,h.tag,e),d&&g.push(d)):h.all?a.each(m.all(c,h.tag,e),function(a,b){g.push(b)}):(d=m.get(c,!0,h.tag,e),d&&g.push(d))}),h.all||a.isArray(f)||(g=g[0]))),g=a.isArray(g)||!h.all?g:[g],d?g:(B(c,g),void 0)},this.getdistance=function(a){var b;for(a.opts.origins=C(a.opts.origins),b=0;b<a.opts.origins.length;b++)a.opts.origins[b]=E(a.opts.origins[b],!0);for(a.opts.destinations=C(a.opts.destinations),b=0;b<a.opts.destinations.length;b++)a.opts.destinations[b]=E(a.opts.destinations[b],!0);z().getDistanceMatrix(a.opts,function(b,c){v(a,c===google.maps.DistanceMatrixStatus.OK?b:!1,c),p.ack()})},this.trigger=function(b){if("string"==typeof b.todo)google.maps.event.trigger(n,b.todo);else{var c=[n,b.todo.eventName];b.todo.var_args&&a.each(b.todo.var_args,function(a,b){c.push(b)}),google.maps.event.trigger.apply(google.maps.event,c)}v(b),p.ack()}}function K(a){var b;if(!a.hasOwnProperty("get"))return!1;for(b in a)if("get"!==b)return!1;return!a.get.hasOwnProperty("callback")}var c,d=0,t={},u=new n;a.fn.gmap3=function(){var b,c=[],d=!0,f=[];for(e(),b=0;b<arguments.length;b++)arguments[b]&&c.push(arguments[b]);return c.length||c.push("map"),a.each(this,function(){var b=a(this),e=b.data("gmap3");d=!1,e||(e=new J(b),b.data("gmap3",e)),1!==c.length||"get"!==c[0]&&!K(c[0])?e._plan(c):"get"===c[0]?f.push(e.get("map",!0)):f.push(e.get(c[0].get,!0,c[0].get.full))}),f.length?1===f.length?f[0]:f:this}}(jQuery);